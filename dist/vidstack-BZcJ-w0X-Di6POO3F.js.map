{"version":3,"file":"vidstack-BZcJ-w0X-Di6POO3F.js","sources":["../node_modules/@vidstack/react/prod/chunks/vidstack-BZcJ-w0X.js"],"sourcesContent":["\"use client\"\n\nimport { createScope, signal, effect, isString, deferredPromise, isObject, isNumber, isBoolean } from './vidstack-CNjv_Zem.js';\nimport { preconnect, TimeRange } from './vidstack-WyKbSRm0.js';\nimport { EmbedProvider } from './vidstack-CcKOND9e.js';\nimport { resolveYouTubeVideoId } from './vidstack-Zc3I7oOd.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst YouTubePlayerState = {\n  Unstarted: -1,\n  Ended: 0,\n  Playing: 1,\n  Paused: 2,\n  Buffering: 3,\n  Cued: 5\n};\n\nclass YouTubeProvider extends EmbedProvider {\n  $$PROVIDER_TYPE = \"YOUTUBE\";\n  scope = createScope();\n  #ctx;\n  #videoId = signal(\"\");\n  #state = -1;\n  #currentSrc = null;\n  #seekingTimer = -1;\n  #invalidPlay = false;\n  #promises = /* @__PURE__ */ new Map();\n  constructor(iframe, ctx) {\n    super(iframe);\n    this.#ctx = ctx;\n  }\n  /**\n   * Sets the player's interface language. The parameter value is an ISO 639-1 two-letter\n   * language code or a fully specified locale. For example, fr and fr-ca are both valid values.\n   * Other language input codes, such as IETF language tags (BCP 47) might also be handled properly.\n   *\n   * The interface language is used for tooltips in the player and also affects the default caption\n   * track. Note that YouTube might select a different caption track language for a particular\n   * user based on the user's individual language preferences and the availability of caption tracks.\n   *\n   * @defaultValue 'en'\n   */\n  language = \"en\";\n  color = \"red\";\n  /**\n   * Whether cookies should be enabled on the embed. This is turned off by default to be\n   * GDPR-compliant.\n   *\n   * @defaultValue `false`\n   */\n  cookies = false;\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  get type() {\n    return \"youtube\";\n  }\n  get videoId() {\n    return this.#videoId();\n  }\n  preconnect() {\n    preconnect(this.getOrigin());\n  }\n  setup() {\n    super.setup();\n    effect(this.#watchVideoId.bind(this));\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  destroy() {\n    this.#reset();\n    const message = \"provider destroyed\";\n    for (const promises of this.#promises.values()) {\n      for (const { reject } of promises) reject(message);\n    }\n    this.#promises.clear();\n  }\n  async play() {\n    return this.#remote(\"playVideo\");\n  }\n  #playFail(message) {\n    this.#getPromise(\"playVideo\")?.reject(message);\n  }\n  async pause() {\n    return this.#remote(\"pauseVideo\");\n  }\n  #pauseFail(message) {\n    this.#getPromise(\"pauseVideo\")?.reject(message);\n  }\n  setMuted(muted) {\n    if (muted) this.#remote(\"mute\");\n    else this.#remote(\"unMute\");\n  }\n  setCurrentTime(time) {\n    this.#remote(\"seekTo\", time);\n    this.#ctx.notify(\"seeking\", time);\n  }\n  setVolume(volume) {\n    this.#remote(\"setVolume\", volume * 100);\n  }\n  setPlaybackRate(rate) {\n    this.#remote(\"setPlaybackRate\", rate);\n  }\n  async loadSource(src) {\n    if (!isString(src.src)) {\n      this.#currentSrc = null;\n      this.#videoId.set(\"\");\n      return;\n    }\n    const videoId = resolveYouTubeVideoId(src.src);\n    this.#videoId.set(videoId ?? \"\");\n    this.#currentSrc = src;\n  }\n  getOrigin() {\n    return !this.cookies ? \"https://www.youtube-nocookie.com\" : \"https://www.youtube.com\";\n  }\n  #watchVideoId() {\n    this.#reset();\n    const videoId = this.#videoId();\n    if (!videoId) {\n      this.src.set(\"\");\n      return;\n    }\n    this.src.set(`${this.getOrigin()}/embed/${videoId}`);\n    this.#ctx.notify(\"load-start\");\n  }\n  buildParams() {\n    const { keyDisabled } = this.#ctx.$props, { muted, playsInline, nativeControls } = this.#ctx.$state, showControls = nativeControls();\n    return {\n      autoplay: 0,\n      cc_lang_pref: this.language,\n      cc_load_policy: showControls ? 1 : void 0,\n      color: this.color,\n      controls: showControls ? 1 : 0,\n      disablekb: !showControls || keyDisabled() ? 1 : 0,\n      enablejsapi: 1,\n      fs: 1,\n      hl: this.language,\n      iv_load_policy: showControls ? 1 : 3,\n      mute: muted() ? 1 : 0,\n      playsinline: playsInline() ? 1 : 0\n    };\n  }\n  #remote(command, arg) {\n    let promise = deferredPromise(), promises = this.#promises.get(command);\n    if (!promises) this.#promises.set(command, promises = []);\n    promises.push(promise);\n    this.postMessage({\n      event: \"command\",\n      func: command,\n      args: arg ? [arg] : void 0\n    });\n    return promise.promise;\n  }\n  onLoad() {\n    window.setTimeout(() => this.postMessage({ event: \"listening\" }), 100);\n  }\n  #onReady(trigger) {\n    this.#ctx.notify(\"loaded-metadata\");\n    this.#ctx.notify(\"loaded-data\");\n    this.#ctx.delegate.ready(void 0, trigger);\n  }\n  #onPause(trigger) {\n    this.#getPromise(\"pauseVideo\")?.resolve();\n    this.#ctx.notify(\"pause\", void 0, trigger);\n  }\n  #onTimeUpdate(time, trigger) {\n    const { duration, realCurrentTime } = this.#ctx.$state, hasEnded = this.#state === YouTubePlayerState.Ended, boundTime = hasEnded ? duration() : time;\n    this.#ctx.notify(\"time-change\", boundTime, trigger);\n    if (!hasEnded && Math.abs(boundTime - realCurrentTime()) > 1) {\n      this.#ctx.notify(\"seeking\", boundTime, trigger);\n    }\n  }\n  #onProgress(buffered, seekable, trigger) {\n    const detail = {\n      buffered: new TimeRange(0, buffered),\n      seekable\n    };\n    this.#ctx.notify(\"progress\", detail, trigger);\n    const { seeking, realCurrentTime } = this.#ctx.$state;\n    if (seeking() && buffered > realCurrentTime()) {\n      this.#onSeeked(trigger);\n    }\n  }\n  #onSeeked(trigger) {\n    const { paused, realCurrentTime } = this.#ctx.$state;\n    window.clearTimeout(this.#seekingTimer);\n    this.#seekingTimer = window.setTimeout(\n      () => {\n        this.#ctx.notify(\"seeked\", realCurrentTime(), trigger);\n        this.#seekingTimer = -1;\n      },\n      paused() ? 100 : 0\n    );\n  }\n  #onEnded(trigger) {\n    const { seeking } = this.#ctx.$state;\n    if (seeking()) this.#onSeeked(trigger);\n    this.#ctx.notify(\"pause\", void 0, trigger);\n    this.#ctx.notify(\"end\", void 0, trigger);\n  }\n  #onStateChange(state, trigger) {\n    const { paused, seeking } = this.#ctx.$state, isPlaying = state === YouTubePlayerState.Playing, isBuffering = state === YouTubePlayerState.Buffering, isPendingPlay = this.#isPending(\"playVideo\"), isPlay = paused() && (isBuffering || isPlaying);\n    if (isBuffering) this.#ctx.notify(\"waiting\", void 0, trigger);\n    if (seeking() && isPlaying) {\n      this.#onSeeked(trigger);\n    }\n    if (this.#invalidPlay && isPlaying) {\n      this.pause();\n      this.#invalidPlay = false;\n      this.setMuted(this.#ctx.$state.muted());\n      return;\n    }\n    if (!isPendingPlay && isPlay) {\n      this.#invalidPlay = true;\n      this.setMuted(true);\n      return;\n    }\n    if (isPlay) {\n      this.#getPromise(\"playVideo\")?.resolve();\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n    switch (state) {\n      case YouTubePlayerState.Cued:\n        this.#onReady(trigger);\n        break;\n      case YouTubePlayerState.Playing:\n        this.#ctx.notify(\"playing\", void 0, trigger);\n        break;\n      case YouTubePlayerState.Paused:\n        this.#onPause(trigger);\n        break;\n      case YouTubePlayerState.Ended:\n        this.#onEnded(trigger);\n        break;\n    }\n    this.#state = state;\n  }\n  onMessage({ info }, event) {\n    if (!info) return;\n    const { title, intrinsicDuration, playbackRate } = this.#ctx.$state;\n    if (isObject(info.videoData) && info.videoData.title !== title()) {\n      this.#ctx.notify(\"title-change\", info.videoData.title, event);\n    }\n    if (isNumber(info.duration) && info.duration !== intrinsicDuration()) {\n      if (isNumber(info.videoLoadedFraction)) {\n        const buffered = info.progressState?.loaded ?? info.videoLoadedFraction * info.duration, seekable = new TimeRange(0, info.duration);\n        this.#onProgress(buffered, seekable, event);\n      }\n      this.#ctx.notify(\"duration-change\", info.duration, event);\n    }\n    if (isNumber(info.playbackRate) && info.playbackRate !== playbackRate()) {\n      this.#ctx.notify(\"rate-change\", info.playbackRate, event);\n    }\n    if (info.progressState) {\n      const { current, seekableStart, seekableEnd, loaded, duration } = info.progressState;\n      this.#onTimeUpdate(current, event);\n      this.#onProgress(loaded, new TimeRange(seekableStart, seekableEnd), event);\n      if (duration !== intrinsicDuration()) {\n        this.#ctx.notify(\"duration-change\", duration, event);\n      }\n    }\n    if (isNumber(info.volume) && isBoolean(info.muted) && !this.#invalidPlay) {\n      const detail = {\n        muted: info.muted,\n        volume: info.volume / 100\n      };\n      this.#ctx.notify(\"volume-change\", detail, event);\n    }\n    if (isNumber(info.playerState) && info.playerState !== this.#state) {\n      this.#onStateChange(info.playerState, event);\n    }\n  }\n  #reset() {\n    this.#state = -1;\n    this.#seekingTimer = -1;\n    this.#invalidPlay = false;\n  }\n  #getPromise(command) {\n    return this.#promises.get(command)?.shift();\n  }\n  #isPending(command) {\n    return Boolean(this.#promises.get(command)?.length);\n  }\n}\n\nexport { YouTubeProvider };\n"],"names":["YouTubePlayerState","YouTubeProvider","EmbedProvider","iframe","ctx","__privateAdd","_YouTubeProvider_instances","__publicField","createScope","_ctx","_videoId","signal","_state","_currentSrc","_seekingTimer","_invalidPlay","_promises","__privateSet","__privateGet","preconnect","effect","__privateMethod","watchVideoId_fn","reset_fn","message","promises","reject","remote_fn","muted","time","volume","rate","src","isString","videoId","resolveYouTubeVideoId","keyDisabled","playsInline","nativeControls","showControls","info","event","title","intrinsicDuration","playbackRate","isObject","isNumber","buffered","_a","seekable","TimeRange","onProgress_fn","current","seekableStart","seekableEnd","loaded","duration","onTimeUpdate_fn","isBoolean","detail","onStateChange_fn","playFail_fn","getPromise_fn","pauseFail_fn","command","arg","promise","deferredPromise","onReady_fn","trigger","onPause_fn","realCurrentTime","hasEnded","boundTime","seeking","onSeeked_fn","paused","onEnded_fn","state","isPlaying","isBuffering","isPendingPlay","isPending_fn","isPlay"],"mappings":"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","x_google_ignoreList":[0]}